<!DOCTYPE html>
<html>
  <head>
    <script>
      var host = ".github.io";
      if (/\.github.io/.test(window.location.host) && window.location.protocol != "https:")
        window.location.protocol = "https";
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, target-densityDpi=medium-dpi">
    <meta content="True" name="HandheldFriendly">
    <title>Lets reimagine e-mail</title>
    <link rel="shortcut icon" href="/ico/favicon.ico">
    <link rel="stylesheet" href="/styles/style.css">
    <link rel="stylesheet" href="//google-code-prettify.googlecode.com/svn/trunk/src/prettify.css">
    <link rel="alternate" type="application/rss+xml" title="spion.github.io" href="/rss.xml">
  </head>
  <body>
    <div class="main">
      <div class="info-tiny"><a href="/" class="img"><img src="https://secure.gravatar.com/avatar/d924ad2ac22af6216aadd2e9184616de?s=144"></a>
        <h1 class="first"><a href="/">Gorgi Kosev</a></h1>
        <p class="subtitle">code, music, math</p>
      </div>
      <div class="info"><a href="/" class="img"><img src="https://secure.gravatar.com/avatar/d924ad2ac22af6216aadd2e9184616de?s=144"></a>
        <h1 class="first"><a href="/">Gorgi Kosev</a></h1>
        <p class="subtitle">code, music, math</p>
        <p class="subtitle margin"><a href="http://twitter.com/spion">@spion</a></p>
      </div>
      <div class="rest">
<div class="post">
  <h1>Lets reimagine e-mail</h1>
  <div class="date">Thu Nov 28 2013</div>
  <div class="content"><p>In the early eighties, Jon Postel first proposed the Simple Mail Transfer
Protocol to the then nascent Internet community. The proposal defined a way to
deliver electronic mail within this new global network made of many other
networks. It did that in part by specifying how e-mail addresses will work -
the e-mail address format that we all know and love today.</p>
<p>SMTP enabled users of the network to exchange electronic mail. Institutions
such as universities and companies would run their own server that speaks the
SMTP protocol. When delivering mail, this server would try to contact the SMTP
server on the recipient&#39;s end and transmit the message.</p>
<p>Lets fast forward to today: We&#39;re still using SMTP to deliver e-mail. The
contents of an e-mail can contain complex data such as attachments. Email works
for everyone, everywhere - anyone can host their own email server.</p>
<p>But SMTP is still essentially used for the same thing: electronic mail. Most
people use one e-mail address for everything, and complain that they&#39;re
receiving lots of spam and irrelevant noise.</p>
<h2 id="http-html-and-www">HTTP, HTML and WWW</h2>
<p>In the early nineties, Tim Berners-Lee and his team proposed the HyperText
Markup Language and the HyperText Transfer protocol. The main idea was to allow
users to write and publish rich documents which can easily reference each-other
across all connected machines, using hyperlinks.</p>
<p>The protocol enabled linking documents to other documents by proposing a format
for URLs, the Uniform Resource Locator. Like e-mail addresses can identify a
recipient, URLs could identify hypertext documents as well tell us the means to
get that document. The URL <a href="http://www.google.com/">http://www.google.com/</a> tells the browser: Using the
HTTP protocol, connect to the domain www.google.com and fetch the default
(index) document.</p>
<p>Fast forward to today: We&#39;re using HTML for everything. A hyperlink could lead
you to a simple rich document, but also to <a href="http://www.unrealengine.com/html5/">games</a>, <a href="http://twitter.com">messaging
services</a>, <a href="https://drive.google.com/">real time collaborative document editors</a>,
<a href="https://github.com">other collaboration platforms</a> and so on.</p>
<p>But there is almost zero cross-service communication between users. In most
cases users must register accounts on each website where they want to
participate.</p>
<h2 id="strength-and-weakness">Strength and weakness</h2>
<p>Did you notice something strange about this history? Two protocols, two
systems, both introducing similar ideas and working in similar ways, but both
having different failings.</p>
<p>Why are we still stuck with the same capabilities of e-mail? Why are we not
building amazing messaging and collaboration tools on top of it? Why are most
existing websites walled-gardens that don&#39;t allow communication with users of
other websites or users that don&#39;t have an account?</p>
<p>Lets try to figure out the answers.</p>
<p>With HTTP, we can distribute both the content and the application that consumes
that content. However, we&#39;re unable to easily send that content to other
servers. As a result, users must create accounts on each website and keep all
their data stored on the website&#39;s servers. The ability to add external user
participation is extremely limited.</p>
<p>This in turn means that people and companies wont be willing to use web-based
services for some of their more sensitive data. It also means that the data
formats used by our web application are somewhat proprietary and cannot be
easily communicated with other, competing services.</p>
<p>With SMTP, the situation is the exact opposite. We can easily distribute
content to other servers. We can extend the protocol in backward-compatible
ways using custom headers and by adding meta-data to the messages. However, we
cant extend the consumer of that data - the e-mail client.</p>
<p>Which means we&#39;re still stuck with plain old e-mail.</p>
<h2 id="what-doxbee-needs">What DoxBee needs</h2>
<p>Our document collaboration platform <a href="http://doxbee.com">DoxBee</a> needs both things. We want
easy communication and sharing between the users of our service. We also want
our users to be able to collaborate with e-mail users, without forcing e-mail
users to use DoxBee. Finally, we&#39;d like to be able to offer dedicated DoxBee
software for companies, which would enable them to host their own data and
messages on their own servers, while still being able to communicate with the
central cloud as well as other DoxBee servers.</p>
<p>Additionally, we also want to offer different functionality: not e-mail, but
document collaboration. Sending and receiving messages is only part of it.
There is also:</p>
<ul>
<li>document version exchange</li>
<li>preview, diff, &quot;blame&quot; and commenting tools</li>
<li>the ability to accept, reject or merge versions coming from others</li>
<li>file synchronization across machines</li>
<li>grouping all versions and related discussions of a document together</li>
</ul>
<h2 id="the-idea">The idea</h2>
<p>We decided to try something a bit radical - combine the strengths of both
e-mail and web. Why use e-mail addresses and SMTP just for e-mail?</p>
<p>We&#39;re rejecting the common idea of a single e-mail address as a personal
identifier, used for everything. Instead we&#39;re trying to encourage the use of
multiple e-mail addresses for multiple purposes.</p>
<p>As a DoxBee user, you will get a new e-mail address. You will use it to
collaborate on documents by sending and receiving new versions. Because it uses
SMTP at its core, DoxBee is be able to work transparently to other users that
are using regular e-mail clients. They will receive a classic e-mail message
with the document attached to it, and they will be able to reply to them with
comments or version updates.</p>
<p>However, this outgoing message will be extended with extra unobtrusive metadata.
This metadata will help an intelligent client, delivered via HTTP/HTML to the
browser. With it, the client is able to organize messages according to their
related document versions and document versions according to their related
document files, in essence building a distributed version control system with
messaging capabilities.</p>
<p>On top of this basic functionality, the smart client can provide nice
cross-platform addon tools for many document types: document preview tools,
diffs, commenting tools, digital signing, quick editing and perhaps even merge
tools for office documents.</p>
<p>Desktop versions of the client will also be able to launch the original desktop
tools and improve your workflow tremendously. Here is how that would look like:</p>
<p>You&#39;re editing a document in Word when suddenly a notification pops up. Your
coworker sent you a new version of the same document. You save your own changes,
then proceed by choosing &quot;Merge&quot; from the notification. This will launch
<a href="http://support.microsoft.com/kb/306484">Word&#39;s own native 3-way merge tool</a> which will allow you to merge
the changes perfectly and continue working on your own part.</p>
<p>No locking - work can be done in parallel. No overriding edits, changes can be
merged instead. Everyone has their own copy and can&#39;t destroy someone else&#39;s
version. Compatible with e-mail.</p>
<p>What more would you need?</p>
<p>It turns out, a lot more.</p>
<h2 id="the-extendible-browsermailclient-">The extendible BrowserMailclient.</h2>
<p>We&#39;ve already solved this problem for <a href="http://doxbee.com">DoxBee</a>. Is this really enough?
Most e-mail clients wont be able to provide rich functionality to the user.</p>
<p>But what if each e-mail message included simple headers such as this one?</p>
<pre><code>X-Client-Extension: DoxBee (http://doxbee.com/)
</code></pre><p>Imagine that. You would be able to distribute a reference to your application
together with the SMTP message. The client will fetch this HTML-based
application via HTTP, then process the message with it like a browser would.</p>
<p>This new kind of mail client could provide APIs to enable rich communication
applications. It could also treat local, &quot;tainted&quot; data differently, same as
the way browsers treat data fetched by doing cross-origin requests. It would
combine the rich extensibility of browsers with the powerful standardized
messaging capabilities of e-mail. Finally, it could be designed in a backward
compatible way, with existing clients getting limited but nevertheless usable
experience.</p>
<p>Message boards. Facebook. Twitter. Forums. Mailing lists and groups.
Interactive maps.</p>
<p>The possibilities are endless.</p>
<h2 id="the-implementation">The implementation</h2>
<p>Lets look at a couple of case studies where this feature will be useful</p>
<ol>
<li><p>An executive that can click &quot;Approve this&quot; directly from his e-mail. This
will add his approval to the business management software, as well as perhaps
deliver an appropriate e-mail to the next in the chain.</p>
</li>
<li><p>A smartmail-compatible server intercepts the doxbee extension. It has a
local extension server to handle DoxBee-extended messages, so it forwards the
message to it for processing. The DoxBee-extension server processes the message
and stores the contained documents and attachments in the version control
system. Then it delivers the message back to the server. When this message is
delivered to the client, they should be able to open it with the doxbee
extension server, not the original doxbee.com</p>
</li>
</ol>
</div><a name="_comments"></a>
  <div id="disqus_thread"></div>
  <script>
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ahintofchaos'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <!--
  a.dsq-brink(href="http://disqus.com") comments powered by 
    span.logo-disqus Disqus
  -->
</div></div>
    </div>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>
    <script>
      $('code').addClass('prettyprint');
      prettyPrint();
    </script>
    <script src="/scripts/jquery.flot.js"></script>
    <script src="/scripts/jquery.flot.highlightSeries.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-42872676-1', 'spion.github.io');
      ga('send', 'pageview');
    </script>
  </body>
</html>