var redirects = [{"words":["amateur","lasse","gjertsen"],"url":"/posts/amateur-lasse-gjertsen.html"},{"words":["intuitive","javascript","array","filtering","function"],"url":"/posts/intuitive-javascript-array-filtering-function.html"},{"words":["intuitive","javascript","array","filtering","function","pt2"],"url":"/posts/intuitive-javascript-array-filtering-function-pt2.html"},{"words":["why","native","sucks","html5","rocks","porting","windows","8"],"url":"/posts/why-native-sucks-html5-rocks-porting-windows-8.html"},{"words":["let","it","snow"],"url":"/posts/let-it-snow.html"},{"words":["fixing","hackernews","mathematical","approach"],"url":"/posts/fixing-hackernews-mathematical-approach.html"},{"words":["introducing","npmsearch"],"url":"/posts/introducing-npmsearch.html"},{"words":["make","most","webapps","work","on","ipad"],"url":"/posts/make-most-webapps-work-on-ipad.html"}]

var local = document.location.pathname;
if (!local.lastIndexOf('/'))
    document.location = 'http://spion.github.io/'
else {
    var urlwords = local.split('/').slice(-1)[0].split('.')[0].split('-')

    var redirects = redirects.map(function(r) {
        return {
            url: r.url,
            score: r.words.reduce(function(acc, w) { 
                return acc + (urlwords.indexOf(w) >= 0); 
            }, 0)
        };
    }).sort(function(x, y) { 
        return y.score - x.score;
    });
    console.log(redirects);
    document.location = 'http://spion.github.io' + redirects[0].url;
}